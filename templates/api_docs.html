{% extends "base.html" %}

{% block title %}API Documentation{% endblock %}

{% block content %}
<div class="flex flex-col lg:flex-row min-h-screen">
    <!-- Side Navigation Panel -->
    <nav class="lg:w-80 bg-gray-50 border-r border-gray-200 lg:fixed lg:top-[69px] lg:left-0 lg:h-[calc(100vh-69px)] lg:overflow-y-auto lg:z-40">
        <div class="px-6 py-6">
        <div class="space-y-8">
            <!-- Overview Section -->
            <div>
                <h3 class="font-semibold text-gray-900 mb-4 flex items-center">
                    <i data-lucide="book-open" class="w-5 h-5 mr-2"></i>
                    Overview
                </h3>
                <ul class="space-y-2 ml-7">
                    <li><a href="#introduction" class="text-gray-600 hover:text-blue-600 text-sm focus:outline-none">Introduction</a></li>
                    <li><a href="#authentication" class="text-gray-600 hover:text-blue-600 text-sm focus:outline-none">Authentication</a></li>
                    <li><a href="#base-url" class="text-gray-600 hover:text-blue-600 text-sm focus:outline-none">Base URL</a></li>
                    <li><a href="#response-format" class="text-gray-600 hover:text-blue-600 text-sm focus:outline-none">Response Format</a></li>
                </ul>
            </div>

            <!-- Validation Endpoints -->
            <div>
                <h3 class="font-semibold text-gray-900 mb-4 flex items-center">
                    <i data-lucide="check-circle" class="w-5 h-5 mr-2"></i>
                    Validation
                </h3>
                <ul class="space-y-2 ml-7">
                    <li><a href="#validate-standard" class="text-gray-600 hover:text-blue-600 text-sm focus:outline-none">Standard FHIR Validation</a></li>
                    <li><a href="#validate-ph-core" class="text-gray-600 hover:text-blue-600 text-sm focus:outline-none">PH-Core Validation</a></li>
                    <li><a href="#validate-batch" class="text-gray-600 hover:text-blue-600 text-sm focus:outline-none">Batch Validation</a></li>
                </ul>
            </div>

            <!-- Information Endpoints -->
            <div>
                <h3 class="font-semibold text-gray-900 mb-4 flex items-center">
                    <i data-lucide="info" class="w-5 h-5 mr-2"></i>
                    Information
                </h3>
                <ul class="space-y-2 ml-7">
                    <li><a href="#resource-types" class="text-gray-600 hover:text-blue-600 text-sm focus:outline-none">Resource Types</a></li>
                    <li><a href="#resource-profile" class="text-gray-600 hover:text-blue-600 text-sm focus:outline-none">Resource Profile</a></li>
                    <li><a href="#server-info" class="text-gray-600 hover:text-blue-600 text-sm focus:outline-none">Server Information</a></li>
                </ul>
            </div>

            <!-- Health & Status -->
            <div>
                <h3 class="font-semibold text-gray-900 mb-4 flex items-center">
                    <i data-lucide="heart" class="w-5 h-5 mr-2"></i>
                    Health & Status
                </h3>
                <ul class="space-y-2 ml-7">
                    <li><a href="#health-check" class="text-gray-600 hover:text-blue-600 text-sm focus:outline-none">Health Check</a></li>
                </ul>
            </div>

            <!-- PH-Core IG -->
            <div>
                <h3 class="font-semibold text-gray-900 mb-4 flex items-center">
                    <i data-lucide="map" class="w-5 h-5 mr-2"></i>
                    PH-Core IG
                </h3>
                <ul class="space-y-2 ml-7">
                    <li><a href="#structure-definition" class="text-gray-600 hover:text-blue-600 text-sm focus:outline-none">Structure Definitions</a></li>
                    <li><a href="#value-sets" class="text-gray-600 hover:text-blue-600 text-sm focus:outline-none">Value Sets</a></li>
                    <li><a href="#code-systems" class="text-gray-600 hover:text-blue-600 text-sm focus:outline-none">Code Systems</a></li>
                </ul>
            </div>
        </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="flex-1 p-6 lg:p-8 lg:ml-80 lg:pt-6 max-w-none">
        <div class="max-w-4xl">
            <!-- Header -->
            <div class="mb-8">
                <h1 class="text-3xl font-bold text-gray-900 mb-4">API Documentation</h1>
                <p class="text-gray-600">Complete guide to using the FHIR Validation API with examples in Python, Node.js, and REST.</p>
            </div>

            <!-- Overview Section -->
            <section id="introduction" class="mb-12">
                <h2 class="text-2xl font-semibold text-gray-900 mb-6 flex items-center">
                    <i data-lucide="book-open" class="w-6 h-6 mr-3"></i>
                    Introduction
                </h2>
                <div class="bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6">
                    <p class="text-gray-700">
                        The FHIR Validation API provides comprehensive validation services for FHIR R4 resources. 
                        It supports both standard FHIR validation and Philippines Healthcare Core (PH-Core) Implementation Guide compliance.
                    </p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div class="bg-white border border-gray-200 rounded-lg p-4">
                        <h3 class="font-semibold text-gray-900 mb-2">FHIR R4 Support</h3>
                        <p class="text-sm text-gray-600">Full validation against FHIR R4 (4.0.1) specification</p>
                    </div>
                    <div class="bg-white border border-gray-200 rounded-lg p-4">
                        <h3 class="font-semibold text-gray-900 mb-2">PH-Core IG</h3>
                        <p class="text-sm text-gray-600">Philippines Healthcare Core Implementation Guide compliance</p>
                    </div>
                    <div class="bg-white border border-gray-200 rounded-lg p-4">
                        <h3 class="font-semibold text-gray-900 mb-2">Batch Processing</h3>
                        <p class="text-sm text-gray-600">Validate multiple resources in a single request</p>
                    </div>
                </div>
            </section>

            <!-- Authentication -->
            <section id="authentication" class="mb-12">
                <h2 class="text-2xl font-semibold text-gray-900 mb-6 flex items-center">
                    <i data-lucide="lock" class="w-6 h-6 mr-3"></i>
                    Authentication
                </h2>
                <div class="bg-green-50 border border-green-200 rounded-lg p-6">
                    <p class="text-gray-700 font-medium mb-2">No Authentication Required</p>
                    <p class="text-gray-600">This API is currently open and does not require any authentication tokens or API keys.</p>
                </div>
            </section>

            <!-- Base URL -->
            <section id="base-url" class="mb-12">
                <h2 class="text-2xl font-semibold text-gray-900 mb-6 flex items-center">
                    <i data-lucide="globe" class="w-6 h-6 mr-3"></i>
                    Base URL
                </h2>
                <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                    <code class="text-blue-600 font-mono">https://wah4pc-validation.echosphere.cfd/api/v1</code>
                </div>
            </section>

            <!-- Response Format -->
            <section id="response-format" class="mb-12">
                <h2 class="text-2xl font-semibold text-gray-900 mb-6 flex items-center">
                    <i data-lucide="file-json" class="w-6 h-6 mr-3"></i>
                    Response Format
                </h2>
                <p class="text-gray-600 mb-4">All API responses are in JSON format with the following structure:</p>
                <div class="bg-gray-900 text-gray-100 rounded-lg p-4 overflow-x-auto">
                    <pre><code class="text-sm">{
  "validation_result": {
    "status": "success|failed|warning",
    "message": "Validation message",
    "issues": [...],
    "resource_type": "Patient",
    "valid": true
  },
  "processed_at": "2024-01-15T10:30:00Z",
  "processing_time_ms": 125
}</code></pre>
                </div>
            </section>

            <!-- Validation Endpoints -->
            <section id="validate-standard" class="mb-12">
                <h2 class="text-2xl font-semibold text-gray-900 mb-6 flex items-center">
                    <i data-lucide="check-circle" class="w-6 h-6 mr-3"></i>
                    Standard FHIR Validation
                </h2>
                <div class="bg-white border border-gray-200 rounded-lg p-6 mb-6">
                    <div class="flex items-center mb-4">
                        <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium mr-3">POST</span>
                        <code class="text-gray-700 font-mono">/validate</code>
                    </div>
                    <p class="text-gray-600">Validates a FHIR resource against the base FHIR R4 specification only (no PH-Core requirements).</p>
                </div>

                <!-- Language Examples Tabs -->
                <div class="mb-6">
                    <div class="flex border-b border-gray-200">
                        <button class="px-4 py-2 text-sm font-medium text-blue-600 border-b-2 border-blue-600 focus:outline-none" onclick="showExample('validate-standard', 'python')">Python</button>
                        <button class="px-4 py-2 text-sm font-medium text-gray-500 hover:text-gray-700 focus:outline-none" onclick="showExample('validate-standard', 'nodejs')">Node.js</button>
                        <button class="px-4 py-2 text-sm font-medium text-gray-500 hover:text-gray-700 focus:outline-none" onclick="showExample('validate-standard', 'curl')">cURL</button>
                    </div>

                    <!-- Python Example -->
                    <div id="validate-standard-python" class="example-content">
                        <div class="bg-gray-900 text-gray-100 rounded-b-lg p-4 overflow-x-auto">
                            <pre><code class="text-sm">import requests
import json

url = "https://wah4pc-validation.echosphere.cfd/api/v1/validate"

# Example Patient resource
patient_resource = {
    "resourceType": "Patient",
    "id": "example-patient",
    "name": [
        {
            "use": "official",
            "family": "Doe",
            "given": ["John"]
        }
    ],
    "gender": "male",
    "birthDate": "1990-01-01"
}

# Validation request payload
payload = {
    "resource": patient_resource,
    "validate_code_systems": True,
    "validate_value_sets": True
}

headers = {
    "Content-Type": "application/json"
}

try:
    response = requests.post(url, json=payload, headers=headers)
    response.raise_for_status()
    
    result = response.json()
    print(f"Validation Status: {result['validation_result']['status']}")
    print(f"Valid: {result['validation_result']['valid']}")
    print(f"Processing Time: {result['processing_time_ms']}ms")
    
    if result['validation_result']['issues']:
        print("Validation Issues:")
        for issue in result['validation_result']['issues']:
            print(f"  - {issue['severity']}: {issue['details']}")
            
except requests.exceptions.RequestException as e:
    print(f"Error: {e}")</code></pre>
                        </div>
                    </div>

                    <!-- Node.js Example -->
                    <div id="validate-standard-nodejs" class="example-content hidden">
                        <div class="bg-gray-900 text-gray-100 rounded-b-lg p-4 overflow-x-auto">
                            <pre><code class="text-sm">const fetch = require('node-fetch'); // or use built-in fetch in Node 18+

const url = "https://wah4pc-validation.echosphere.cfd/api/v1/validate";

// Example Patient resource
const patientResource = {
    resourceType: "Patient",
    id: "example-patient",
    name: [
        {
            use: "official",
            family: "Doe",
            given: ["John"]
        }
    ],
    gender: "male",
    birthDate: "1990-01-01"
};

// Validation request payload
const payload = {
    resource: patientResource,
    validate_code_systems: true,
    validate_value_sets: true
};

async function validateResource() {
    try {
        const response = await fetch(url, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(payload)
        });

        if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
        }

        const result = await response.json();
        
        console.log(`Validation Status: ${result.validation_result.status}`);
        console.log(`Valid: ${result.validation_result.valid}`);
        console.log(`Processing Time: ${result.processing_time_ms}ms`);
        
        if (result.validation_result.issues.length > 0) {
            console.log("Validation Issues:");
            result.validation_result.issues.forEach(issue => {
                console.log(`  - ${issue.severity}: ${issue.details}`);
            });
        }
        
    } catch (error) {
        console.error("Error:", error);
    }
}

validateResource();</code></pre>
                        </div>
                    </div>

                    <!-- cURL Example -->
                    <div id="validate-standard-curl" class="example-content hidden">
                        <div class="bg-gray-900 text-gray-100 rounded-b-lg p-4 overflow-x-auto">
                            <pre><code class="text-sm">curl -X POST "https://wah4pc-validation.echosphere.cfd/api/v1/validate" \
  -H "Content-Type: application/json" \
  -d '{
    "resource": {
      "resourceType": "Patient",
      "id": "example-patient",
      "name": [
        {
          "use": "official",
          "family": "Doe",
          "given": ["John"]
        }
      ],
      "gender": "male",
      "birthDate": "1990-01-01"
    },
    "validate_code_systems": true,
    "validate_value_sets": true
  }'</code></pre>
                        </div>
                    </div>
                </div>
            </section>

            <!-- PH-Core Validation -->
            <section id="validate-ph-core" class="mb-12">
                <h2 class="text-2xl font-semibold text-gray-900 mb-6 flex items-center">
                    <i data-lucide="shield-check" class="w-6 h-6 mr-3"></i>
                    PH-Core Validation
                </h2>
                <div class="bg-white border border-gray-200 rounded-lg p-6 mb-6">
                    <div class="flex items-center mb-4">
                        <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium mr-3">POST</span>
                        <code class="text-gray-700 font-mono">/validate/ph-core</code>
                    </div>
                    <p class="text-gray-600 mb-4">Validates a FHIR resource against BOTH FHIR R4 AND PH-Core Implementation Guide (STRICT COMPLIANCE REQUIRED).</p>
                    <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
                        <p class="text-yellow-800 text-sm"><strong>Note:</strong> Resources that do not meet PH-Core requirements will FAIL validation.</p>
                    </div>
                </div>

                <!-- Language Examples Tabs -->
                <div class="mb-6">
                    <div class="flex border-b border-gray-200">
                        <button class="px-4 py-2 text-sm font-medium text-blue-600 border-b-2 border-blue-600 focus:outline-none" onclick="showExample('validate-ph-core', 'python')">Python</button>
                        <button class="px-4 py-2 text-sm font-medium text-gray-500 hover:text-gray-700 focus:outline-none" onclick="showExample('validate-ph-core', 'nodejs')">Node.js</button>
                        <button class="px-4 py-2 text-sm font-medium text-gray-500 hover:text-gray-700 focus:outline-none" onclick="showExample('validate-ph-core', 'curl')">cURL</button>
                    </div>

                    <!-- Python Example -->
                    <div id="validate-ph-core-python" class="example-content">
                        <div class="bg-gray-900 text-gray-100 rounded-b-lg p-4 overflow-x-auto">
                            <pre><code class="text-sm">import requests
import json

url = "https://wah4pc-validation.echosphere.cfd/api/v1/validate/ph-core"

# Example PH-Core compliant Patient resource
ph_core_patient = {
    "resourceType": "Patient",
    "id": "ph-core-patient",
    "meta": {
        "profile": ["https://wah4pc-validation.echosphere.cfd/StructureDefinition/ph-core-patient"]
    },
    "extension": [
        {
            "url": "https://wah4pc-validation.echosphere.cfd/StructureDefinition/indigenous-people",
            "valueBoolean": False
        }
    ],
    "name": [
        {
            "use": "official",
            "family": "Dela Cruz",
            "given": ["Juan"]
        }
    ],
    "gender": "male",
    "birthDate": "1980-01-01"
}

# Validation request payload
payload = {
    "resource": ph_core_patient,
    "validate_code_systems": True,
    "validate_value_sets": True
}

headers = {
    "Content-Type": "application/json"
}

try:
    response = requests.post(url, json=payload, headers=headers)
    response.raise_for_status()
    
    result = response.json()
    print(f"PH-Core Validation Status: {result['validation_result']['status']}")
    print(f"Valid: {result['validation_result']['valid']}")
    print(f"Processing Time: {result['processing_time_ms']}ms")
    
    if result['validation_result']['issues']:
        print("Validation Issues:")
        for issue in result['validation_result']['issues']:
            print(f"  - {issue['severity']}: {issue['details']}")
            if issue.get('location'):
                print(f"    Location: {issue['location']}")
                
except requests.exceptions.RequestException as e:
    print(f"Error: {e}")</code></pre>
                        </div>
                    </div>

                    <!-- Node.js Example -->
                    <div id="validate-ph-core-nodejs" class="example-content hidden">
                        <div class="bg-gray-900 text-gray-100 rounded-b-lg p-4 overflow-x-auto">
                            <pre><code class="text-sm">const fetch = require('node-fetch');

const url = "https://wah4pc-validation.echosphere.cfd/api/v1/validate/ph-core";

// Example PH-Core compliant Patient resource
const phCorePatient = {
    resourceType: "Patient",
    id: "ph-core-patient",
    meta: {
        profile: ["https://wah4pc-validation.echosphere.cfd/StructureDefinition/ph-core-patient"]
    },
    extension: [
        {
            url: "https://wah4pc-validation.echosphere.cfd/StructureDefinition/indigenous-people",
            valueBoolean: false
        }
    ],
    name: [
        {
            use: "official",
            family: "Dela Cruz",
            given: ["Juan"]
        }
    ],
    gender: "male",
    birthDate: "1980-01-01"
};

// Validation request payload
const payload = {
    resource: phCorePatient,
    validate_code_systems: true,
    validate_value_sets: true
};

async function validatePHCoreResource() {
    try {
        const response = await fetch(url, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(payload)
        });

        if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
        }

        const result = await response.json();
        
        console.log(`PH-Core Validation Status: ${result.validation_result.status}`);
        console.log(`Valid: ${result.validation_result.valid}`);
        console.log(`Processing Time: ${result.processing_time_ms}ms`);
        
        if (result.validation_result.issues.length > 0) {
            console.log("Validation Issues:");
            result.validation_result.issues.forEach(issue => {
                console.log(`  - ${issue.severity}: ${issue.details}`);
                if (issue.location) {
                    console.log(`    Location: ${issue.location}`);
                }
            });
        }
        
    } catch (error) {
        console.error("Error:", error);
    }
}

validatePHCoreResource();</code></pre>
                        </div>
                    </div>

                    <!-- cURL Example -->
                    <div id="validate-ph-core-curl" class="example-content hidden">
                        <div class="bg-gray-900 text-gray-100 rounded-b-lg p-4 overflow-x-auto">
                            <pre><code class="text-sm">curl -X POST "https://wah4pc-validation.echosphere.cfd/api/v1/validate/ph-core" \
  -H "Content-Type: application/json" \
  -d '{
    "resource": {
      "resourceType": "Patient",
      "id": "ph-core-patient",
      "meta": {
        "profile": ["https://wah4pc-validation.echosphere.cfd/StructureDefinition/ph-core-patient"]
      },
      "extension": [
        {
          "url": "https://wah4pc-validation.echosphere.cfd/StructureDefinition/indigenous-people",
          "valueBoolean": false
        }
      ],
      "name": [
        {
          "use": "official",
          "family": "Dela Cruz",
          "given": ["Juan"]
        }
      ],
      "gender": "male",
      "birthDate": "1980-01-01"
    },
    "validate_code_systems": true,
    "validate_value_sets": true
  }'</code></pre>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Batch Validation -->
            <section id="validate-batch" class="mb-12">
                <h2 class="text-2xl font-semibold text-gray-900 mb-6 flex items-center">
                    <i data-lucide="layers" class="w-6 h-6 mr-3"></i>
                    Batch Validation
                </h2>
                <div class="bg-white border border-gray-200 rounded-lg p-6 mb-6">
                    <div class="flex items-center mb-4">
                        <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium mr-3">POST</span>
                        <code class="text-gray-700 font-mono">/validate/batch</code>
                    </div>
                    <p class="text-gray-600 mb-4">Validates multiple FHIR resources against FHIR R4 specification only (no PH-Core requirements). Maximum 100 resources per batch.</p>
                    <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                        <p class="text-blue-800 text-sm"><strong>Batch Limit:</strong> Maximum of 100 resources can be validated in a single batch request.</p>
                    </div>
                </div>

                <!-- Language Examples Tabs -->
                <div class="mb-6">
                    <div class="flex border-b border-gray-200">
                        <button class="px-4 py-2 text-sm font-medium text-blue-600 border-b-2 border-blue-600 focus:outline-none" onclick="showExample('validate-batch', 'python')">Python</button>
                        <button class="px-4 py-2 text-sm font-medium text-gray-500 hover:text-gray-700 focus:outline-none" onclick="showExample('validate-batch', 'nodejs')">Node.js</button>
                        <button class="px-4 py-2 text-sm font-medium text-gray-500 hover:text-gray-700 focus:outline-none" onclick="showExample('validate-batch', 'curl')">cURL</button>
                    </div>

                    <!-- Python Example -->
                    <div id="validate-batch-python" class="example-content">
                        <div class="bg-gray-900 text-gray-100 rounded-b-lg p-4 overflow-x-auto">
                            <pre><code class="text-sm">import requests
import json

url = "https://wah4pc-validation.echosphere.cfd/api/v1/validate/batch"

# Example batch of resources
batch_resources = [
    {
        "resource": {
            "resourceType": "Patient",
            "id": "patient-1",
            "name": [{"family": "Smith", "given": ["Jane"]}],
            "gender": "female",
            "birthDate": "1985-03-15"
        }
    },
    {
        "resource": {
            "resourceType": "Observation",
            "id": "obs-1",
            "status": "final",
            "code": {
                "coding": [
                    {
                        "system": "http://loinc.org",
                        "code": "55284-4",
                        "display": "Blood pressure systolic and diastolic"
                    }
                ]
            },
            "subject": {
                "reference": "Patient/patient-1"
            }
        }
    }
]

headers = {
    "Content-Type": "application/json"
}

try:
    response = requests.post(url, json=batch_resources, headers=headers)
    response.raise_for_status()
    
    results = response.json()
    
    print(f"Batch validation completed. {len(results)} resources processed.")
    
    for i, result in enumerate(results):
        print(f"\nResource {i+1}:")
        print(f"  Status: {result['validation_result']['status']}")
        print(f"  Valid: {result['validation_result']['valid']}")
        print(f"  Processing Time: {result['processing_time_ms']}ms")
        
        if result['validation_result']['issues']:
            print("  Issues:")
            for issue in result['validation_result']['issues']:
                print(f"    - {issue['severity']}: {issue['details']}")
                
except requests.exceptions.RequestException as e:
    print(f"Error: {e}")</code></pre>
                        </div>
                    </div>

                    <!-- Node.js Example -->
                    <div id="validate-batch-nodejs" class="example-content hidden">
                        <div class="bg-gray-900 text-gray-100 rounded-b-lg p-4 overflow-x-auto">
                            <pre><code class="text-sm">const fetch = require('node-fetch');

const url = "https://wah4pc-validation.echosphere.cfd/api/v1/validate/batch";

// Example batch of resources
const batchResources = [
    {
        resource: {
            resourceType: "Patient",
            id: "patient-1",
            name: [{family: "Smith", given: ["Jane"]}],
            gender: "female",
            birthDate: "1985-03-15"
        }
    },
    {
        resource: {
            resourceType: "Observation",
            id: "obs-1",
            status: "final",
            code: {
                coding: [
                    {
                        system: "http://loinc.org",
                        code: "55284-4",
                        display: "Blood pressure systolic and diastolic"
                    }
                ]
            },
            subject: {
                reference: "Patient/patient-1"
            }
        }
    }
];

async function validateBatch() {
    try {
        const response = await fetch(url, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(batchResources)
        });

        if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
        }

        const results = await response.json();
        
        console.log(`Batch validation completed. ${results.length} resources processed.`);
        
        results.forEach((result, index) => {
            console.log(`\nResource ${index + 1}:`);
            console.log(`  Status: ${result.validation_result.status}`);
            console.log(`  Valid: ${result.validation_result.valid}`);
            console.log(`  Processing Time: ${result.processing_time_ms}ms`);
            
            if (result.validation_result.issues.length > 0) {
                console.log("  Issues:");
                result.validation_result.issues.forEach(issue => {
                    console.log(`    - ${issue.severity}: ${issue.details}`);
                });
            }
        });
        
    } catch (error) {
        console.error("Error:", error);
    }
}

validateBatch();</code></pre>
                        </div>
                    </div>

                    <!-- cURL Example -->
                    <div id="validate-batch-curl" class="example-content hidden">
                        <div class="bg-gray-900 text-gray-100 rounded-b-lg p-4 overflow-x-auto">
                            <pre><code class="text-sm">curl -X POST "https://wah4pc-validation.echosphere.cfd/api/v1/validate/batch" \
  -H "Content-Type: application/json" \
  -d '[
    {
      "resource": {
        "resourceType": "Patient",
        "id": "patient-1",
        "name": [{"family": "Smith", "given": ["Jane"]}],
        "gender": "female",
        "birthDate": "1985-03-15"
      }
    },
    {
      "resource": {
        "resourceType": "Observation",
        "id": "obs-1",
        "status": "final",
        "code": {
          "coding": [
            {
              "system": "http://loinc.org",
              "code": "55284-4",
              "display": "Blood pressure systolic and diastolic"
            }
          ]
        },
        "subject": {
          "reference": "Patient/patient-1"
        }
      }
    }
  ]'</code></pre>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Resource Types -->
            <section id="resource-types" class="mb-12">
                <h2 class="text-2xl font-semibold text-gray-900 mb-6 flex items-center">
                    <i data-lucide="database" class="w-6 h-6 mr-3"></i>
                    Get Supported Resource Types
                </h2>
                <div class="bg-white border border-gray-200 rounded-lg p-6 mb-6">
                    <div class="flex items-center mb-4">
                        <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium mr-3">GET</span>
                        <code class="text-gray-700 font-mono">/resource-types</code>
                    </div>
                    <p class="text-gray-600">Returns a list of all supported FHIR resource types available for validation.</p>
                </div>

                <!-- Language Examples Tabs -->
                <div class="mb-6">
                    <div class="flex border-b border-gray-200">
                        <button class="px-4 py-2 text-sm font-medium text-blue-600 border-b-2 border-blue-600 focus:outline-none" onclick="showExample('resource-types', 'python')">Python</button>
                        <button class="px-4 py-2 text-sm font-medium text-gray-500 hover:text-gray-700 focus:outline-none" onclick="showExample('resource-types', 'nodejs')">Node.js</button>
                        <button class="px-4 py-2 text-sm font-medium text-gray-500 hover:text-gray-700 focus:outline-none" onclick="showExample('resource-types', 'curl')">cURL</button>
                    </div>

                    <!-- Python Example -->
                    <div id="resource-types-python" class="example-content">
                        <div class="bg-gray-900 text-gray-100 rounded-b-lg p-4 overflow-x-auto">
                            <pre><code class="text-sm">import requests

url = "https://wah4pc-validation.echosphere.cfd/api/v1/resource-types"

try:
    response = requests.get(url)
    response.raise_for_status()
    
    resource_types = response.json()
    
    print(f"Supported Resource Types ({len(resource_types)}):")
    for resource_type in sorted(resource_types):
        print(f"  - {resource_type}")
        
except requests.exceptions.RequestException as e:
    print(f"Error: {e}")</code></pre>
                        </div>
                    </div>

                    <!-- Node.js Example -->
                    <div id="resource-types-nodejs" class="example-content hidden">
                        <div class="bg-gray-900 text-gray-100 rounded-b-lg p-4 overflow-x-auto">
                            <pre><code class="text-sm">const fetch = require('node-fetch');

const url = "https://wah4pc-validation.echosphere.cfd/api/v1/resource-types";

async function getResourceTypes() {
    try {
        const response = await fetch(url);
        
        if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
        }

        const resourceTypes = await response.json();
        
        console.log(`Supported Resource Types (${resourceTypes.length}):`);
        resourceTypes.sort().forEach(resourceType => {
            console.log(`  - ${resourceType}`);
        });
        
    } catch (error) {
        console.error("Error:", error);
    }
}

getResourceTypes();</code></pre>
                        </div>
                    </div>

                    <!-- cURL Example -->
                    <div id="resource-types-curl" class="example-content hidden">
                        <div class="bg-gray-900 text-gray-100 rounded-b-lg p-4 overflow-x-auto">
                            <pre><code class="text-sm">curl -X GET "https://wah4pc-validation.echosphere.cfd/api/v1/resource-types"</code></pre>
                        </div>
                    </div>
                </div>

                <!-- Example Response -->
                <div class="mb-6">
                    <h3 class="text-lg font-semibold text-gray-900 mb-3">Example Response</h3>
                    <div class="bg-gray-900 text-gray-100 rounded-lg p-4 overflow-x-auto">
                        <pre><code class="text-sm">[
  "Account",
  "ActivityDefinition",
  "AdverseEvent",
  "AllergyIntolerance",
  "Appointment",
  "AppointmentResponse",
  "AuditEvent",
  "Basic",
  "Binary",
  "BiologicallyDerivedProduct",
  "BodyStructure",
  "Bundle",
  "CapabilityStatement",
  "CarePlan",
  "CareTeam",
  "CatalogEntry",
  "ChargeItem",
  "ChargeItemDefinition",
  "Claim",
  "ClaimResponse",
  "ClinicalImpression",
  "CodeSystem",
  "Communication",
  "CommunicationRequest",
  "CompartmentDefinition",
  "Composition",
  "ConceptMap",
  "Condition",
  "Consent",
  "Contract",
  "Coverage",
  "CoverageEligibilityRequest",
  "CoverageEligibilityResponse",
  "DetectedIssue",
  "Device",
  "DeviceDefinition",
  "DeviceMetric",
  "DeviceRequest",
  "DeviceUseStatement",
  "DiagnosticReport",
  "DocumentManifest",
  "DocumentReference",
  "DomainResource",
  "EffectEvidenceSynthesis",
  "Encounter",
  "Endpoint",
  "EnrollmentRequest",
  "EnrollmentResponse",
  "EpisodeOfCare",
  "EventDefinition",
  "Evidence",
  "EvidenceVariable",
  "ExampleScenario",
  "ExplanationOfBenefit",
  "FamilyMemberHistory",
  "Flag",
  "Goal",
  "GraphDefinition",
  "Group",
  "GuidanceResponse",
  "HealthcareService",
  "ImagingStudy",
  "Immunization",
  "ImmunizationEvaluation",
  "ImmunizationRecommendation",
  "ImplementationGuide",
  "InsurancePlan",
  "Invoice",
  "Library",
  "Linkage",
  "List",
  "Location",
  "Measure",
  "MeasureReport",
  "Media",
  "Medication",
  "MedicationAdministration",
  "MedicationDispense",
  "MedicationKnowledge",
  "MedicationRequest",
  "MedicationStatement",
  "MedicinalProduct",
  "MedicinalProductAuthorization",
  "MedicinalProductContraindication",
  "MedicinalProductIndication",
  "MedicinalProductIngredient",
  "MedicinalProductInteraction",
  "MedicinalProductManufactured",
  "MedicinalProductPackaged",
  "MedicinalProductPharmaceutical",
  "MedicinalProductUndesirableEffect",
  "MessageDefinition",
  "MessageHeader",
  "MolecularSequence",
  "NamingSystem",
  "NutritionOrder",
  "Observation",
  "ObservationDefinition",
  "OperationDefinition",
  "OperationOutcome",
  "Organization",
  "OrganizationAffiliation",
  "Parameters",
  "Patient",
  "PaymentNotice",
  "PaymentReconciliation",
  "Person",
  "PlanDefinition",
  "Practitioner",
  "PractitionerRole",
  "Procedure",
  "Provenance",
  "Questionnaire",
  "QuestionnaireResponse",
  "RelatedPerson",
  "RequestGroup",
  "ResearchDefinition",
  "ResearchElementDefinition",
  "ResearchStudy",
  "ResearchSubject",
  "Resource",
  "RiskAssessment",
  "RiskEvidenceSynthesis",
  "Schedule",
  "SearchParameter",
  "ServiceRequest",
  "Slot",
  "Specimen",
  "SpecimenDefinition",
  "StructureDefinition",
  "StructureMap",
  "Subscription",
  "Substance",
  "SubstanceNucleicAcid",
  "SubstancePolymer",
  "SubstanceProtein",
  "SubstanceReferenceInformation",
  "SubstanceSourceMaterial",
  "SubstanceSpecification",
  "SupplyDelivery",
  "SupplyRequest",
  "Task",
  "TerminologyCapabilities",
  "TestReport",
  "TestScript",
  "ValueSet",
  "VerificationResult",
  "VisionPrescription"
]</code></pre>
                    </div>
                </div>
            </section>

            <!-- Resource Profile -->
            <section id="resource-profile" class="mb-12">
                <h2 class="text-2xl font-semibold text-gray-900 mb-6 flex items-center">
                    <i data-lucide="file-text" class="w-6 h-6 mr-3"></i>
                    Get Resource Profile
                </h2>
                <div class="bg-white border border-gray-200 rounded-lg p-6 mb-6">
                    <div class="flex items-center mb-4">
                        <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium mr-3">GET</span>
                        <code class="text-gray-700 font-mono">/profile/{resource_type}</code>
                    </div>
                    <p class="text-gray-600">Returns the FHIR profile definition for a specific resource type.</p>
                </div>

                <!-- Language Examples Tabs -->
                <div class="mb-6">
                    <div class="flex border-b border-gray-200">
                        <button class="px-4 py-2 text-sm font-medium text-blue-600 border-b-2 border-blue-600 focus:outline-none" onclick="showExample('resource-profile', 'python')">Python</button>
                        <button class="px-4 py-2 text-sm font-medium text-gray-500 hover:text-gray-700 focus:outline-none" onclick="showExample('resource-profile', 'nodejs')">Node.js</button>
                        <button class="px-4 py-2 text-sm font-medium text-gray-500 hover:text-gray-700 focus:outline-none" onclick="showExample('resource-profile', 'curl')">cURL</button>
                    </div>

                    <!-- Python Example -->
                    <div id="resource-profile-python" class="example-content">
                        <div class="bg-gray-900 text-gray-100 rounded-b-lg p-4 overflow-x-auto">
                            <pre><code class="text-sm">import requests
import json

resource_type = "Patient"  # Change to desired resource type
url = f"https://wah4pc-validation.echosphere.cfd/api/v1/profile/{resource_type}"

try:
    response = requests.get(url)
    response.raise_for_status()
    
    profile = response.json()
    
    print(f"Profile for {resource_type}:")
    print(f"  Resource Type: {profile.get('resourceType')}")
    print(f"  URL: {profile.get('url')}")
    print(f"  Status: {profile.get('status')}")
    print(f"  Kind: {profile.get('kind')}")
    print(f"  Type: {profile.get('type')}")
    print(f"  Base Definition: {profile.get('baseDefinition')}")
    
    # Print full profile as JSON (optional)
    # print(json.dumps(profile, indent=2))
        
except requests.exceptions.RequestException as e:
    print(f"Error: {e}")</code></pre>
                        </div>
                    </div>

                    <!-- Node.js Example -->
                    <div id="resource-profile-nodejs" class="example-content hidden">
                        <div class="bg-gray-900 text-gray-100 rounded-b-lg p-4 overflow-x-auto">
                            <pre><code class="text-sm">const fetch = require('node-fetch');

const resourceType = "Patient"; // Change to desired resource type
const url = `https://wah4pc-validation.echosphere.cfd/api/v1/profile/${resourceType}`;

async function getResourceProfile() {
    try {
        const response = await fetch(url);
        
        if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
        }

        const profile = await response.json();
        
        console.log(`Profile for ${resourceType}:`);
        console.log(`  Resource Type: ${profile.resourceType}`);
        console.log(`  URL: ${profile.url}`);
        console.log(`  Status: ${profile.status}`);
        console.log(`  Kind: ${profile.kind}`);
        console.log(`  Type: ${profile.type}`);
        console.log(`  Base Definition: ${profile.baseDefinition}`);
        
        // Print full profile as JSON (optional)
        // console.log(JSON.stringify(profile, null, 2));
        
    } catch (error) {
        console.error("Error:", error);
    }
}

getResourceProfile();</code></pre>
                        </div>
                    </div>

                    <!-- cURL Example -->
                    <div id="resource-profile-curl" class="example-content hidden">
                        <div class="bg-gray-900 text-gray-100 rounded-b-lg p-4 overflow-x-auto">
                            <pre><code class="text-sm">curl -X GET "https://wah4pc-validation.echosphere.cfd/api/v1/profile/Patient"</code></pre>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Server Info -->
            <section id="server-info" class="mb-12">
                <h2 class="text-2xl font-semibold text-gray-900 mb-6 flex items-center">
                    <i data-lucide="server" class="w-6 h-6 mr-3"></i>
                    Server Information
                </h2>
                <div class="bg-white border border-gray-200 rounded-lg p-6 mb-6">
                    <div class="flex items-center mb-4">
                        <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium mr-3">GET</span>
                        <code class="text-gray-700 font-mono">/server-info</code>
                    </div>
                    <p class="text-gray-600">Returns information about the FHIR validation server including version, supported formats, and operations.</p>
                </div>

                <!-- Language Examples Tabs -->
                <div class="mb-6">
                    <div class="flex border-b border-gray-200">
                        <button class="px-4 py-2 text-sm font-medium text-blue-600 border-b-2 border-blue-600 focus:outline-none" onclick="showExample('server-info', 'python')">Python</button>
                        <button class="px-4 py-2 text-sm font-medium text-gray-500 hover:text-gray-700 focus:outline-none" onclick="showExample('server-info', 'nodejs')">Node.js</button>
                        <button class="px-4 py-2 text-sm font-medium text-gray-500 hover:text-gray-700 focus:outline-none" onclick="showExample('server-info', 'curl')">cURL</button>
                    </div>

                    <!-- Python Example -->
                    <div id="server-info-python" class="example-content">
                        <div class="bg-gray-900 text-gray-100 rounded-b-lg p-4 overflow-x-auto">
                            <pre><code class="text-sm">import requests

url = "https://wah4pc-validation.echosphere.cfd/api/v1/server-info"

try:
    response = requests.get(url)
    response.raise_for_status()
    
    server_info = response.json()
    
    print("Server Information:")
    print(f"  Name: {server_info['name']}")
    print(f"  Version: {server_info['version']}")
    print(f"  Description: {server_info['description']}")
    print(f"  FHIR Version: {server_info['fhir_version']}")
    print(f"  Supported Formats: {', '.join(server_info['supported_formats'])}")
    print(f"  Supported Operations: {', '.join(server_info['supported_operations'])}")
        
except requests.exceptions.RequestException as e:
    print(f"Error: {e}")</code></pre>
                        </div>
                    </div>

                    <!-- Node.js Example -->
                    <div id="server-info-nodejs" class="example-content hidden">
                        <div class="bg-gray-900 text-gray-100 rounded-b-lg p-4 overflow-x-auto">
                            <pre><code class="text-sm">const fetch = require('node-fetch');

const url = "https://wah4pc-validation.echosphere.cfd/api/v1/server-info";

async function getServerInfo() {
    try {
        const response = await fetch(url);
        
        if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
        }

        const serverInfo = await response.json();
        
        console.log("Server Information:");
        console.log(`  Name: ${serverInfo.name}`);
        console.log(`  Version: ${serverInfo.version}`);
        console.log(`  Description: ${serverInfo.description}`);
        console.log(`  FHIR Version: ${serverInfo.fhir_version}`);
        console.log(`  Supported Formats: ${serverInfo.supported_formats.join(', ')}`);
        console.log(`  Supported Operations: ${serverInfo.supported_operations.join(', ')}`);
        
    } catch (error) {
        console.error("Error:", error);
    }
}

getServerInfo();</code></pre>
                        </div>
                    </div>

                    <!-- cURL Example -->
                    <div id="server-info-curl" class="example-content hidden">
                        <div class="bg-gray-900 text-gray-100 rounded-b-lg p-4 overflow-x-auto">
                            <pre><code class="text-sm">curl -X GET "https://wah4pc-validation.echosphere.cfd/api/v1/server-info"</code></pre>
                        </div>
                    </div>
                </div>

                <!-- Example Response -->
                <div class="mb-6">
                    <h3 class="text-lg font-semibold text-gray-900 mb-3">Example Response</h3>
                    <div class="bg-gray-900 text-gray-100 rounded-lg p-4 overflow-x-auto">
                        <pre><code class="text-sm">{
  "name": "FHIR Validation Server",
  "version": "2.1.0",
  "description": "Universal FHIR validation server with PH-Core Implementation Guide support",
  "fhir_version": "R4",
  "supported_formats": [
    "application/fhir+json",
    "application/json"
  ],
  "supported_operations": [
    "validate-standard",
    "validate-ph-core", 
    "batch-validate",
    "resource-info"
  ]
}</code></pre>
                    </div>
                </div>
            </section>

            <!-- Health Check -->
            <section id="health-check" class="mb-12">
                <h2 class="text-2xl font-semibold text-gray-900 mb-6 flex items-center">
                    <i data-lucide="heart" class="w-6 h-6 mr-3"></i>
                    Health Check
                </h2>
                <div class="bg-white border border-gray-200 rounded-lg p-6 mb-6">
                    <div class="flex items-center mb-4">
                        <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium mr-3">GET</span>
                        <code class="text-gray-700 font-mono">/health</code>
                    </div>
                    <p class="text-gray-600">Performs a health check on the server and returns status information including uptime and system health.</p>
                </div>

                <!-- Language Examples Tabs -->
                <div class="mb-6">
                    <div class="flex border-b border-gray-200">
                        <button class="px-4 py-2 text-sm font-medium text-blue-600 border-b-2 border-blue-600 focus:outline-none" onclick="showExample('health-check', 'python')">Python</button>
                        <button class="px-4 py-2 text-sm font-medium text-gray-500 hover:text-gray-700 focus:outline-none" onclick="showExample('health-check', 'nodejs')">Node.js</button>
                        <button class="px-4 py-2 text-sm font-medium text-gray-500 hover:text-gray-700 focus:outline-none" onclick="showExample('health-check', 'curl')">cURL</button>
                    </div>

                    <!-- Python Example -->
                    <div id="health-check-python" class="example-content">
                        <div class="bg-gray-900 text-gray-100 rounded-b-lg p-4 overflow-x-auto">
                            <pre><code class="text-sm">import requests

url = "https://wah4pc-validation.echosphere.cfd/api/v1/health"

try:
    response = requests.get(url)
    response.raise_for_status()
    
    health_status = response.json()
    
    print("Server Health Check:")
    print(f"  Status: {health_status['status']}")
    print(f"  Version: {health_status['version']}")
    print(f"  Timestamp: {health_status['timestamp']}")
    print(f"  Uptime: {health_status['uptime_seconds']} seconds")
    
    # Convert uptime to human readable format
    uptime_minutes = health_status['uptime_seconds'] // 60
    uptime_hours = uptime_minutes // 60
    uptime_days = uptime_hours // 24
    
    if uptime_days > 0:
        print(f"  Uptime (readable): {uptime_days} days, {uptime_hours % 24} hours, {uptime_minutes % 60} minutes")
    elif uptime_hours > 0:
        print(f"  Uptime (readable): {uptime_hours} hours, {uptime_minutes % 60} minutes")
    else:
        print(f"  Uptime (readable): {uptime_minutes} minutes")
        
except requests.exceptions.RequestException as e:
    print(f"Error: {e}")</code></pre>
                        </div>
                    </div>

                    <!-- Node.js Example -->
                    <div id="health-check-nodejs" class="example-content hidden">
                        <div class="bg-gray-900 text-gray-100 rounded-b-lg p-4 overflow-x-auto">
                            <pre><code class="text-sm">const fetch = require('node-fetch');

const url = "https://wah4pc-validation.echosphere.cfd/api/v1/health";

async function checkHealth() {
    try {
        const response = await fetch(url);
        
        if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
        }

        const healthStatus = await response.json();
        
        console.log("Server Health Check:");
        console.log(`  Status: ${healthStatus.status}`);
        console.log(`  Version: ${healthStatus.version}`);
        console.log(`  Timestamp: ${healthStatus.timestamp}`);
        console.log(`  Uptime: ${healthStatus.uptime_seconds} seconds`);
        
        // Convert uptime to human readable format
        const uptimeMinutes = Math.floor(healthStatus.uptime_seconds / 60);
        const uptimeHours = Math.floor(uptimeMinutes / 60);
        const uptimeDays = Math.floor(uptimeHours / 24);
        
        if (uptimeDays > 0) {
            console.log(`  Uptime (readable): ${uptimeDays} days, ${uptimeHours % 24} hours, ${uptimeMinutes % 60} minutes`);
        } else if (uptimeHours > 0) {
            console.log(`  Uptime (readable): ${uptimeHours} hours, ${uptimeMinutes % 60} minutes`);
        } else {
            console.log(`  Uptime (readable): ${uptimeMinutes} minutes`);
        }
        
    } catch (error) {
        console.error("Error:", error);
    }
}

checkHealth();</code></pre>
                        </div>
                    </div>

                    <!-- cURL Example -->
                    <div id="health-check-curl" class="example-content hidden">
                        <div class="bg-gray-900 text-gray-100 rounded-b-lg p-4 overflow-x-auto">
                            <pre><code class="text-sm">curl -X GET "https://wah4pc-validation.echosphere.cfd/api/v1/health"</code></pre>
                        </div>
                    </div>
                </div>

                <!-- Example Response -->
                <div class="mb-6">
                    <h3 class="text-lg font-semibold text-gray-900 mb-3">Example Response</h3>
                    <div class="bg-gray-900 text-gray-100 rounded-lg p-4 overflow-x-auto">
                        <pre><code class="text-sm">{
  "status": "healthy",
  "timestamp": "2024-01-15T10:30:45.123Z",
  "version": "2.1.0",
  "uptime_seconds": 86400
}</code></pre>
                    </div>
                </div>
            </section>

            <!-- PH-Core IG Endpoints -->
            <section id="structure-definition" class="mb-12">
                <h2 class="text-2xl font-semibold text-gray-900 mb-6 flex items-center">
                    <i data-lucide="map" class="w-6 h-6 mr-3"></i>
                    PH-Core Structure Definitions
                </h2>
                <div class="bg-white border border-gray-200 rounded-lg p-6 mb-6">
                    <div class="flex items-center mb-4">
                        <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium mr-3">GET</span>
                        <code class="text-gray-700 font-mono">/StructureDefinition/{profile_id}</code>
                    </div>
                    <p class="text-gray-600 mb-4">Access PH-Core StructureDefinition resources directly via their canonical URLs. These define the profiles and constraints for Philippines Healthcare resources.</p>
                    <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                        <p class="text-blue-800 text-sm"><strong>Note:</strong> These endpoints serve the Implementation Guide resources directly and support FHIR canonical URL resolution.</p>
                    </div>
                </div>

                <!-- Available Structure Definitions -->
                <div class="mb-6">
                    <h3 class="text-lg font-semibold text-gray-900 mb-3">Available Structure Definitions</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                            <h4 class="font-medium text-gray-900 mb-2">PH-Core Patient</h4>
                            <code class="text-sm text-blue-600">ph-core-patient</code>
                        </div>
                        <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                            <h4 class="font-medium text-gray-900 mb-2">Indigenous People Extension</h4>
                            <code class="text-sm text-blue-600">indigenous-people</code>
                        </div>
                        <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                            <h4 class="font-medium text-gray-900 mb-2">PSGC Address Extensions</h4>
                            <code class="text-sm text-blue-600">city-municipality</code>, <code class="text-sm text-blue-600">province</code>
                        </div>
                        <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                            <h4 class="font-medium text-gray-900 mb-2">And more...</h4>
                            <p class="text-sm text-gray-600">Visit the PH-Core section for complete list</p>
                        </div>
                    </div>
                </div>

                <!-- Example Access -->
                <div class="mb-6">
                    <h3 class="text-lg font-semibold text-gray-900 mb-3">Example: Get PH-Core Patient Profile</h3>
                    <div class="bg-gray-900 text-gray-100 rounded-lg p-4 overflow-x-auto">
                        <pre><code class="text-sm">curl -X GET "https://wah4pc-validation.echosphere.cfd/StructureDefinition/ph-core-patient"</code></pre>
                    </div>
                </div>
            </section>

            <!-- Value Sets & Code Systems -->
            <section id="value-sets" class="mb-12">
                <h2 class="text-2xl font-semibold text-gray-900 mb-6 flex items-center">
                    <i data-lucide="list" class="w-6 h-6 mr-3"></i>
                    PH-Core Value Sets & Code Systems
                </h2>
                <div class="bg-white border border-gray-200 rounded-lg p-6 mb-6">
                    <div class="flex items-center mb-4">
                        <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium mr-3">GET</span>
                        <code class="text-gray-700 font-mono">/ValueSet/{valueset_id}</code>
                    </div>
                    <div class="flex items-center mb-4">
                        <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium mr-3">GET</span>
                        <code class="text-gray-700 font-mono">/CodeSystem/{codesystem_id}</code>
                    </div>
                    <p class="text-gray-600">Access PH-Core ValueSets and CodeSystems that define the terminologies specific to Philippines Healthcare context.</p>
                </div>

                <!-- Examples -->
                <div class="mb-6">
                    <h3 class="text-lg font-semibold text-gray-900 mb-3">Examples</h3>
                    <div class="space-y-4">
                        <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                            <h4 class="font-medium text-gray-900 mb-2">PSGC Province Codes</h4>
                            <code class="text-sm text-blue-600">GET /CodeSystem/psgc-province-codes</code>
                        </div>
                        <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                            <h4 class="font-medium text-gray-900 mb-2">Indigenous Groups ValueSet</h4>
                            <code class="text-sm text-blue-600">GET /ValueSet/indigenous-group-valueset</code>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Error Handling -->
            <section id="error-handling" class="mb-12">
                <h2 class="text-2xl font-semibold text-gray-900 mb-6 flex items-center">
                    <i data-lucide="alert-triangle" class="w-6 h-6 mr-3"></i>
                    Error Handling
                </h2>
                <div class="bg-white border border-gray-200 rounded-lg p-6 mb-6">
                    <p class="text-gray-600 mb-4">The API uses conventional HTTP response codes to indicate the success or failure of requests.</p>
                    
                    <div class="space-y-4">
                        <div class="flex items-start space-x-3">
                            <span class="bg-green-100 text-green-800 px-2 py-1 rounded text-sm font-medium">200</span>
                            <div>
                                <p class="font-medium text-gray-900">OK</p>
                                <p class="text-sm text-gray-600">Request successful</p>
                            </div>
                        </div>
                        <div class="flex items-start space-x-3">
                            <span class="bg-red-100 text-red-800 px-2 py-1 rounded text-sm font-medium">400</span>
                            <div>
                                <p class="font-medium text-gray-900">Bad Request</p>
                                <p class="text-sm text-gray-600">Invalid request payload or parameters</p>
                            </div>
                        </div>
                        <div class="flex items-start space-x-3">
                            <span class="bg-red-100 text-red-800 px-2 py-1 rounded text-sm font-medium">404</span>
                            <div>
                                <p class="font-medium text-gray-900">Not Found</p>
                                <p class="text-sm text-gray-600">Resource or endpoint not found</p>
                            </div>
                        </div>
                        <div class="flex items-start space-x-3">
                            <span class="bg-red-100 text-red-800 px-2 py-1 rounded text-sm font-medium">422</span>
                            <div>
                                <p class="font-medium text-gray-900">Unprocessable Entity</p>
                                <p class="text-sm text-gray-600">Request payload validation failed</p>
                            </div>
                        </div>
                        <div class="flex items-start space-x-3">
                            <span class="bg-red-100 text-red-800 px-2 py-1 rounded text-sm font-medium">500</span>
                            <div>
                                <p class="font-medium text-gray-900">Internal Server Error</p>
                                <p class="text-sm text-gray-600">Server encountered an error processing the request</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Error Response Format -->
                <div class="mb-6">
                    <h3 class="text-lg font-semibold text-gray-900 mb-3">Error Response Format</h3>
                    <div class="bg-gray-900 text-gray-100 rounded-lg p-4 overflow-x-auto">
                        <pre><code class="text-sm">{
  "detail": "Error message describing what went wrong",
  "status_code": 400,
  "error_type": "validation_error"
}</code></pre>
                    </div>
                </div>
            </section>

            <!-- Rate Limiting -->
            <section id="rate-limiting" class="mb-12">
                <h2 class="text-2xl font-semibold text-gray-900 mb-6 flex items-center">
                    <i data-lucide="clock" class="w-6 h-6 mr-3"></i>
                    Rate Limiting
                </h2>
                <div class="bg-white border border-gray-200 rounded-lg p-6">
                    <p class="text-gray-600 mb-4">Currently, the API does not implement rate limiting, but reasonable usage is expected.</p>
                    
                    <div class="space-y-3">
                        <div class="flex items-center space-x-3">
                            <i data-lucide="check" class="w-5 h-5 text-green-500"></i>
                            <span class="text-gray-700">Batch validation limited to 100 resources per request</span>
                        </div>
                        <div class="flex items-center space-x-3">
                            <i data-lucide="check" class="w-5 h-5 text-green-500"></i>
                            <span class="text-gray-700">No authentication required for public access</span>
                        </div>
                        <div class="flex items-center space-x-3">
                            <i data-lucide="info" class="w-5 h-5 text-blue-500"></i>
                            <span class="text-gray-700">Please use the API responsibly to ensure availability for all users</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Additional Resources -->
            <section id="additional-resources" class="mb-12">
                <h2 class="text-2xl font-semibold text-gray-900 mb-6 flex items-center">
                    <i data-lucide="external-link" class="w-6 h-6 mr-3"></i>
                    Additional Resources
                </h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="bg-white border border-gray-200 rounded-lg p-6">
                        <h3 class="font-semibold text-gray-900 mb-3 flex items-center">
                            <i data-lucide="book" class="w-5 h-5 mr-2"></i>
                            FHIR Documentation
                        </h3>
                        <ul class="space-y-2 text-sm">
                            <li><a href="https://hl7.org/fhir/R4/" class="text-blue-600 hover:text-blue-800 focus:outline-none" target="_blank">FHIR R4 Specification</a></li>
                            <li><a href="https://hl7.org/fhir/R4/resourcelist.html" class="text-blue-600 hover:text-blue-800 focus:outline-none" target="_blank">FHIR Resource List</a></li>
                            <li><a href="https://hl7.org/fhir/R4/validation.html" class="text-blue-600 hover:text-blue-800 focus:outline-none" target="_blank">FHIR Validation Guide</a></li>
                        </ul>
                    </div>
                    
                    <div class="bg-white border border-gray-200 rounded-lg p-6">
                        <h3 class="font-semibold text-gray-900 mb-3 flex items-center">
                            <i data-lucide="map-pin" class="w-5 h-5 mr-2"></i>
                            PH-Core Resources
                        </h3>
                        <ul class="space-y-2 text-sm">
                            <li><a href="/resources/ph_core" class="text-blue-600 hover:text-blue-800 focus:outline-none">Browse PH-Core Profiles</a></li>
                            <li><a href="/resources/examples" class="text-blue-600 hover:text-blue-800 focus:outline-none">Example Resources</a></li>
                            <li><a href="/docs" class="text-blue-600 hover:text-blue-800 focus:outline-none">Swagger Documentation</a></li>
                        </ul>
                    </div>
                </div>
            </section>
        </div>
    </main>
</div>

<script>
    // Function to show different language examples
    function showExample(sectionId, language) {
        // Hide all examples for this section
        const examples = document.querySelectorAll(`[id^="${sectionId}-"]`);
        examples.forEach(example => {
            if (example.classList.contains('example-content')) {
                example.classList.add('hidden');
            }
        });
        
        // Show the selected example
        const selectedExample = document.getElementById(`${sectionId}-${language}`);
        if (selectedExample) {
            selectedExample.classList.remove('hidden');
        }
        
        // Update tab styling
        const tabContainer = document.querySelector(`#${sectionId}`).parentElement.querySelector('.flex.border-b');
        if (tabContainer) {
            const tabs = tabContainer.querySelectorAll('button');
            tabs.forEach(tab => {
                tab.classList.remove('text-blue-600', 'border-b-2', 'border-blue-600');
                tab.classList.add('text-gray-500', 'hover:text-gray-700');
            });
            
            // Style the active tab
            const activeTab = [...tabs].find(tab => tab.textContent.trim() === language || 
                                            (language === 'nodejs' && tab.textContent.trim() === 'Node.js') ||
                                            (language === 'curl' && tab.textContent.trim() === 'cURL'));
            if (activeTab) {
                activeTab.classList.remove('text-gray-500', 'hover:text-gray-700');
                activeTab.classList.add('text-blue-600', 'border-b-2', 'border-blue-600');
            }
        }
    }
    
    // Smooth scrolling for navigation links
    document.addEventListener('DOMContentLoaded', function() {
        const navLinks = document.querySelectorAll('nav a[href^="#"]');
        navLinks.forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const targetId = this.getAttribute('href').substring(1);
                const targetElement = document.getElementById(targetId);
                if (targetElement) {
                    targetElement.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });
        
        // Initialize first examples to be visible
        const sections = ['validate-standard', 'validate-ph-core', 'validate-batch', 'resource-types', 'resource-profile', 'server-info', 'health-check'];
        sections.forEach(section => {
            showExample(section, 'python');
        });
    });
</script>
{% endblock %}
